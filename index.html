<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Stavthon Interpreter by Kaustav Ray</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { font-family: sans-serif; padding: 10px; background: #f0f0f0; }
    textarea, pre { font-family: monospace; width: 100%; box-sizing: border-box; }
    textarea { height: 200px; padding: 10px; margin-bottom: 10px; }
    button { padding: 10px 20px; font-size: 16px; cursor: pointer; }
    pre { background: #222; color: #eee; padding: 10px; border-radius: 5px; white-space: pre-wrap; }
    h1, h2 { margin: 10px 0; }
  </style>
</head>
<body>

<h1>Stavthon Interpreter v4.0</h1>
<p><strong>Founder:</strong> Kaustav Ray</p>

<textarea id="codeInput" placeholder="Write your Stavthon code here...">
# Sample Code
x = 100
y = 200
z = x + y
print(x)
print(y)
print(z)
</textarea>

<button onclick="runStavthon()">Run</button>

<h2>Output:</h2>
<pre id="output"></pre>

<script>
function runStavthon() {
  const code = document.getElementById('codeInput').value;
  const output = document.getElementById('output');
  output.textContent = '';

  const variables = {};

  const lines = code.split('\n');

  for (let line of lines) {
    line = line.trim();

    if (!line || line.startsWith('#')) continue; // Skip empty lines & comments

    // Print statement
    if (line.startsWith('print(') && line.endsWith(')')) {
      const varName = line.slice(6, -1).trim();
      if (variables.hasOwnProperty(varName)) {
        output.textContent += variables[varName] + '\n';
      } else {
        output.textContent += `Error: Undefined variable "${varName}"\n`;
      }
      continue;
    }

    // Variable assignment with optional addition
    if (line.includes('=')) {
      const [left, right] = line.split('=').map(s => s.trim());
      if (!/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(left)) {
        output.textContent += `SyntaxError: Invalid variable name "${left}"\n`;
        continue;
      }

      let value;

      // Handle addition of two variables/numbers
      if (right.includes('+')) {
        const [a, b] = right.split('+').map(s => s.trim());
        const valA = isNaN(a) ? (variables[a] !== undefined ? variables[a] : NaN) : Number(a);
        const valB = isNaN(b) ? (variables[b] !== undefined ? variables[b] : NaN) : Number(b);

        if (isNaN(valA) || isNaN(valB)) {
          output.textContent += `RuntimeError: Cannot add non-numeric values in "${line}"\n`;
          continue;
        }

        value = valA + valB;
      } else {
        // Handle direct assignment (number or string)
        value = isNaN(right) ? right : Number(right);
      }

      variables[left] = value;
      continue;
    }

    // Unknown command
    output.textContent += `SyntaxError: Unrecognized command "${line}"\n`;
  }
}
</script>

</body>
</html>
